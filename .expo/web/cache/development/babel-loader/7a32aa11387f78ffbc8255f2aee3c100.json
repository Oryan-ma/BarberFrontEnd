{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactNative = require(\"react-native\");\n\nvar _immutable = require(\"immutable\");\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _xdate = _interopRequireDefault(require(\"xdate\"));\n\nvar _style = _interopRequireDefault(require(\"./style\"));\n\nvar _calendarList = _interopRequireDefault(require(\"../calendar-list\"));\n\nvar _week = _interopRequireDefault(require(\"../expandableCalendar/week\"));\n\nvar _asCalendarConsumer = _interopRequireDefault(require(\"./asCalendarConsumer\"));\n\nvar _dateutils = require(\"../dateutils\");\n\nvar _jsxFileName = \"C:\\\\Users\\\\oryan\\\\Desktop\\\\BookMeX\\\\BookMexFrontEnd\\\\node_modules\\\\react-native-calendars\\\\src\\\\expandableCalendar\\\\weekCalendar.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar commons = require('./commons');\n\nvar UPDATE_SOURCES = commons.UPDATE_SOURCES;\nvar NUMBER_OF_PAGES = 2;\n\nvar WeekCalendar = function (_Component) {\n  (0, _inherits2.default)(WeekCalendar, _Component);\n\n  var _super = _createSuper(WeekCalendar);\n\n  function WeekCalendar(props) {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, WeekCalendar);\n    _this = _super.call(this, props);\n\n    _this.onDayPress = function (value) {\n      _lodash.default.invoke(_this.props.context, 'setDate', value.dateString, UPDATE_SOURCES.DAY_PRESS);\n    };\n\n    _this.onScroll = function (_ref) {\n      var x = _ref.nativeEvent.contentOffset.x;\n      var newPage = Math.round(x / _this.containerWidth);\n\n      if (_this.page !== newPage) {\n        var items = _this.state.items;\n        _this.page = newPage;\n\n        _lodash.default.invoke(_this.props.context, 'setDate', items[_this.page], UPDATE_SOURCES.WEEK_SCROLL);\n\n        if (_this.page === items.length - 1) {\n          for (var i = 0; i <= NUMBER_OF_PAGES; i++) {\n            items[i] = items[i + NUMBER_OF_PAGES];\n          }\n\n          _this.setState({\n            items: (0, _toConsumableArray2.default)(items)\n          });\n        } else if (_this.page === 0) {\n          for (var _i = items.length - 1; _i >= NUMBER_OF_PAGES; _i--) {\n            items[_i] = items[_i - NUMBER_OF_PAGES];\n          }\n\n          _this.setState({\n            items: (0, _toConsumableArray2.default)(items)\n          });\n        }\n      }\n    };\n\n    _this.onMomentumScrollEnd = function () {\n      var items = _this.state.items;\n      var isFirstPage = _this.page === 0;\n      var isLastPage = _this.page === items.length - 1;\n\n      if (isFirstPage || isLastPage) {\n        _this.list.current.scrollToIndex({\n          animated: false,\n          index: NUMBER_OF_PAGES\n        });\n\n        _this.page = NUMBER_OF_PAGES;\n\n        var newWeekArray = _this.getDatesArray();\n\n        if (isLastPage) {\n          for (var i = NUMBER_OF_PAGES + 1; i < items.length; i++) {\n            items[i] = newWeekArray[i];\n          }\n        } else {\n          for (var _i2 = 0; _i2 < NUMBER_OF_PAGES; _i2++) {\n            items[_i2] = newWeekArray[_i2];\n          }\n        }\n\n        setTimeout(function () {\n          _this.setState({\n            items: (0, _toConsumableArray2.default)(items)\n          });\n        }, 100);\n      }\n    };\n\n    _this.renderItem = function (_ref2) {\n      var item = _ref2.item;\n      var _this$props = _this.props,\n          calendarWidth = _this$props.calendarWidth,\n          style = _this$props.style,\n          onDayPress = _this$props.onDayPress,\n          others = (0, _objectWithoutProperties2.default)(_this$props, [\"calendarWidth\", \"style\", \"onDayPress\"]);\n      return _react.default.createElement(_week.default, (0, _extends2.default)({}, others, {\n        key: item,\n        current: item,\n        style: [{\n          width: calendarWidth || _this.containerWidth\n        }, style],\n        markedDates: _this.getMarkedDates(),\n        onDayPress: onDayPress || _this.onDayPress,\n        __self: (0, _assertThisInitialized2.default)(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 7\n        }\n      }));\n    };\n\n    _this.getItemLayout = function (data, index) {\n      return {\n        length: _this.containerWidth,\n        offset: _this.containerWidth * index,\n        index: index\n      };\n    };\n\n    _this.keyExtractor = function (item, index) {\n      return index.toString();\n    };\n\n    _this.style = (0, _style.default)(props.theme);\n    _this.list = _react.default.createRef();\n    _this.page = NUMBER_OF_PAGES;\n    _this.state = {\n      items: _this.getDatesArray()\n    };\n    return _this;\n  }\n\n  (0, _createClass2.default)(WeekCalendar, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props$context = this.props.context,\n          updateSource = _this$props$context.updateSource,\n          date = _this$props$context.date;\n\n      if (date !== prevProps.context.date && updateSource !== UPDATE_SOURCES.WEEK_SCROLL) {\n        this.setState({\n          items: this.getDatesArray()\n        });\n        this.list.current.scrollToIndex({\n          animated: false,\n          index: NUMBER_OF_PAGES\n        });\n      }\n    }\n  }, {\n    key: \"containerWidth\",\n    get: function get() {\n      return this.props.calendarWidth || commons.screenWidth;\n    }\n  }, {\n    key: \"getDatesArray\",\n    value: function getDatesArray() {\n      var array = [];\n\n      for (var index = -NUMBER_OF_PAGES; index <= NUMBER_OF_PAGES; index++) {\n        var d = this.getDate(index);\n        array.push(d);\n      }\n\n      return array;\n    }\n  }, {\n    key: \"getDate\",\n    value: function getDate(weekIndex) {\n      var _this$props2 = this.props,\n          current = _this$props2.current,\n          context = _this$props2.context,\n          firstDay = _this$props2.firstDay;\n      var d = (0, _xdate.default)(current || context.date);\n      var dayOfTheWeek = d.getDay();\n\n      if (dayOfTheWeek < firstDay && firstDay > 0) {\n        dayOfTheWeek = 7 + dayOfTheWeek;\n      }\n\n      var dd = weekIndex === 0 ? d : d.addDays(firstDay - dayOfTheWeek);\n      var newDate = dd.addWeeks(weekIndex);\n      return newDate.toString('yyyy-MM-dd');\n    }\n  }, {\n    key: \"getMarkedDates\",\n    value: function getMarkedDates() {\n      var _this$props3 = this.props,\n          context = _this$props3.context,\n          markedDates = _this$props3.markedDates;\n\n      if (markedDates) {\n        var marked = _lodash.default.cloneDeep(markedDates);\n\n        if (marked[context.date]) {\n          marked[context.date].selected = true;\n        } else {\n          marked[context.date] = {\n            selected: true\n          };\n        }\n\n        return marked;\n      }\n\n      return (0, _defineProperty2.default)({}, context.date, {\n        selected: true\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props4 = this.props,\n          allowShadow = _this$props4.allowShadow,\n          firstDay = _this$props4.firstDay,\n          hideDayNames = _this$props4.hideDayNames,\n          current = _this$props4.current,\n          context = _this$props4.context;\n      var items = this.state.items;\n      var weekDaysNames = (0, _dateutils.weekDayNames)(firstDay);\n      var extraData = (0, _immutable.Map)({\n        current: current,\n        date: context.date,\n        firstDay: firstDay\n      });\n      return _react.default.createElement(_reactNative.View, {\n        testID: this.props.testID,\n        style: [allowShadow && this.style.containerShadow, !hideDayNames && {\n          paddingBottom: 6\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 7\n        }\n      }, !hideDayNames && _react.default.createElement(_reactNative.View, {\n        style: [this.style.week, {\n          marginTop: 12,\n          marginBottom: -2\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }\n      }, weekDaysNames.map(function (day, idx) {\n        return _react.default.createElement(_reactNative.Text, {\n          allowFontScaling: false,\n          key: idx,\n          style: _this2.style.dayHeader,\n          numberOfLines: 1,\n          accessibilityLabel: '',\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 15\n          }\n        }, day);\n      })), _react.default.createElement(_reactNative.FlatList, {\n        ref: this.list,\n        data: items,\n        extraData: extraData,\n        style: this.style.container,\n        horizontal: true,\n        showsHorizontalScrollIndicator: false,\n        pagingEnabled: true,\n        scrollEnabled: true,\n        renderItem: this.renderItem,\n        keyExtractor: this.keyExtractor,\n        initialScrollIndex: NUMBER_OF_PAGES,\n        getItemLayout: this.getItemLayout,\n        onScroll: this.onScroll,\n        onMomentumScrollEnd: this.onMomentumScrollEnd,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 9\n        }\n      }));\n    }\n  }]);\n  return WeekCalendar;\n}(_react.Component);\n\nWeekCalendar.displayName = 'WeekCalendar';\nWeekCalendar.propTypes = _objectSpread(_objectSpread({}, _calendarList.default.propTypes), {}, {\n  current: _propTypes.default.any,\n  allowShadow: _propTypes.default.bool,\n  hideDayNames: _propTypes.default.bool\n});\nWeekCalendar.defaultProps = {\n  firstDay: 0,\n  allowShadow: true\n};\n\nvar _default = (0, _asCalendarConsumer.default)(WeekCalendar);\n\nexports.default = _default;","map":{"version":3,"sources":["C:/Users/oryan/Desktop/BookMeX/BookMexFrontEnd/node_modules/react-native-calendars/src/expandableCalendar/weekCalendar.js"],"names":["commons","require","UPDATE_SOURCES","NUMBER_OF_PAGES","WeekCalendar","props","onDayPress","value","_","invoke","context","dateString","DAY_PRESS","onScroll","x","nativeEvent","contentOffset","newPage","Math","round","containerWidth","page","items","state","WEEK_SCROLL","length","i","setState","onMomentumScrollEnd","isFirstPage","isLastPage","list","current","scrollToIndex","animated","index","newWeekArray","getDatesArray","setTimeout","renderItem","item","calendarWidth","style","others","width","getMarkedDates","getItemLayout","data","offset","keyExtractor","toString","theme","React","createRef","prevProps","updateSource","date","screenWidth","array","d","getDate","push","weekIndex","firstDay","dayOfTheWeek","getDay","dd","addDays","newDate","addWeeks","markedDates","marked","cloneDeep","selected","allowShadow","hideDayNames","weekDaysNames","extraData","testID","containerShadow","paddingBottom","week","marginTop","marginBottom","map","day","idx","dayHeader","container","Component","displayName","propTypes","CalendarList","PropTypes","any","bool","defaultProps"],"mappings":"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","sourcesContent":["import _ from 'lodash';\nimport React, {Component} from 'react';\nimport {FlatList, View, Text} from 'react-native';\nimport {Map} from 'immutable';\nimport PropTypes from 'prop-types';\nimport XDate from 'xdate';\n\nimport styleConstructor from './style';\nimport CalendarList from '../calendar-list';\nimport Week from '../expandableCalendar/week';\nimport asCalendarConsumer from './asCalendarConsumer';\nimport {weekDayNames} from '../dateutils';\n\n\nconst commons = require('./commons');\nconst UPDATE_SOURCES = commons.UPDATE_SOURCES;\nconst NUMBER_OF_PAGES = 2; // must be a positive number\n\n/**\n * @description: Week calendar component\n * @note: Should be wrapped with 'CalendarProvider'\n * @example: https://github.com/wix/react-native-calendars/blob/master/example/src/screens/expandableCalendar.js\n */\nclass WeekCalendar extends Component {\n  static displayName = 'WeekCalendar';\n\n  static propTypes = {\n    ...CalendarList.propTypes,\n    /** the current date */\n    current: PropTypes.any,\n    /** whether to have shadow/elevation for the calendar */\n    allowShadow: PropTypes.bool,\n    /** whether to hide the names of the week days */\n    hideDayNames: PropTypes.bool\n  };\n\n  static defaultProps = {\n    firstDay: 0,\n    allowShadow: true\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.style = styleConstructor(props.theme);\n\n    this.list = React.createRef();\n    this.page = NUMBER_OF_PAGES;\n\n    this.state = {\n      items: this.getDatesArray()\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    const {updateSource, date} = this.props.context;\n\n    if (date !== prevProps.context.date && updateSource !== UPDATE_SOURCES.WEEK_SCROLL) {\n      this.setState({items: this.getDatesArray()});\n      this.list.current.scrollToIndex({animated: false, index: NUMBER_OF_PAGES});\n    }\n  }\n\n  get containerWidth() {\n    return this.props.calendarWidth || commons.screenWidth;\n  }\n\n  getDatesArray() {\n    const array = [];\n    for (let index = -NUMBER_OF_PAGES; index <= NUMBER_OF_PAGES; index++) {\n      const d = this.getDate(index);\n      array.push(d);\n    }\n    return array;\n  }\n\n  getDate(weekIndex) {\n    const {current, context, firstDay} = this.props;\n    const d = XDate(current || context.date);\n    // get the first day of the week as date (for the on scroll mark)\n    let dayOfTheWeek = d.getDay();\n    if (dayOfTheWeek < firstDay && firstDay > 0) {\n      dayOfTheWeek = 7 + dayOfTheWeek;\n    }\n\n    // leave the current date in the visible week as is\n    const dd = weekIndex === 0 ? d : d.addDays(firstDay - dayOfTheWeek);\n    const newDate = dd.addWeeks(weekIndex);\n    return  newDate.toString('yyyy-MM-dd');\n  }\n\n  getMarkedDates() {\n    const {context, markedDates} = this.props;\n\n    if (markedDates) {\n      const marked = _.cloneDeep(markedDates);\n\n      if (marked[context.date]) {\n        marked[context.date].selected = true;\n      } else {\n        marked[context.date] = {selected: true};\n      }\n      return marked;\n    }\n    return {[context.date]: {selected: true}};\n  }\n\n  onDayPress = (value) => {\n    _.invoke(this.props.context, 'setDate', value.dateString, UPDATE_SOURCES.DAY_PRESS);\n  }\n\n  onScroll = ({nativeEvent: {contentOffset: {x}}}) => {\n    const newPage = Math.round(x / this.containerWidth);\n\n    if (this.page !== newPage) {\n      const {items} = this.state;\n      this.page = newPage;\n\n      _.invoke(this.props.context, 'setDate', items[this.page], UPDATE_SOURCES.WEEK_SCROLL);\n\n      if (this.page === items.length - 1) {\n        for (let i = 0; i <= NUMBER_OF_PAGES; i++) {\n          items[i] = items[i + NUMBER_OF_PAGES];\n        }\n        this.setState({items: [...items]});\n      } else if (this.page === 0) {\n        for (let i = items.length - 1; i >= NUMBER_OF_PAGES; i--) {\n          items[i] = items[i - NUMBER_OF_PAGES];\n        }\n        this.setState({items: [...items]});\n      }\n    }\n  }\n\n  onMomentumScrollEnd = () => {\n    const {items} = this.state;\n    const isFirstPage = this.page === 0;\n    const isLastPage = this.page === items.length - 1;\n\n    if (isFirstPage || isLastPage) {\n      this.list.current.scrollToIndex({animated: false, index: NUMBER_OF_PAGES});\n      this.page = NUMBER_OF_PAGES;\n      const newWeekArray = this.getDatesArray();\n\n      if (isLastPage) {\n        for (let i = NUMBER_OF_PAGES + 1; i < items.length; i++) {\n          items[i] = newWeekArray[i];\n        }\n      } else {\n        for (let i = 0; i < NUMBER_OF_PAGES; i++) {\n          items[i] = newWeekArray[i];\n        }\n      }\n\n      setTimeout(() => {\n        this.setState({items: [...items]});\n      }, 100);\n    }\n  }\n\n  renderItem = ({item}) => {\n    const {calendarWidth, style, onDayPress, ...others} = this.props;\n\n    return (\n      <Week\n        {...others}\n        key={item}\n        current={item}\n        style={[{width: calendarWidth || this.containerWidth}, style]}\n        markedDates={this.getMarkedDates()}\n        onDayPress={onDayPress || this.onDayPress}\n      />\n    );\n  }\n\n  getItemLayout = (data, index) => {\n    return {\n      length: this.containerWidth,\n      offset: this.containerWidth * index,\n      index\n    };\n  }\n\n  keyExtractor = (item, index) => index.toString();\n\n  render() {\n    const {allowShadow, firstDay, hideDayNames, current, context} = this.props;\n    const {items} = this.state;\n    let weekDaysNames = weekDayNames(firstDay);\n    const extraData = Map({\n      current,\n      date: context.date,\n      firstDay\n    });\n    return (\n      <View testID={this.props.testID} style={[allowShadow && this.style.containerShadow, !hideDayNames && {paddingBottom: 6}]}>\n        {!hideDayNames &&\n          <View style={[this.style.week, {marginTop: 12, marginBottom: -2}]}>\n            {/* {this.props.weekNumbers && <Text allowFontScaling={false} style={this.style.dayHeader}></Text>} */}\n            {weekDaysNames.map((day, idx) => (\n              <Text\n                allowFontScaling={false}\n                key={idx}\n                style={this.style.dayHeader}\n                numberOfLines={1}\n                accessibilityLabel={''}\n                // accessible={false} // not working\n                // importantForAccessibility='no'\n              >\n                {day}\n              </Text>\n            ))}\n          </View>}\n        <FlatList\n          ref={this.list}\n          data={items}\n          extraData={extraData}\n          style={this.style.container}\n          horizontal\n          showsHorizontalScrollIndicator={false}\n          pagingEnabled\n          scrollEnabled\n          renderItem={this.renderItem}\n          keyExtractor={this.keyExtractor}\n          initialScrollIndex={NUMBER_OF_PAGES}\n          getItemLayout={this.getItemLayout}\n          onScroll={this.onScroll}\n          onMomentumScrollEnd={this.onMomentumScrollEnd}\n        />\n      </View>\n    );\n  }\n}\n\nexport default asCalendarConsumer(WeekCalendar);\n"]},"metadata":{},"sourceType":"script"}