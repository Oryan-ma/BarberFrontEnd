{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _xdate = _interopRequireDefault(require(\"xdate\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactNative = require(\"react-native\");\n\nvar _componentUpdater = require(\"../../component-updater\");\n\nvar _dateutils = _interopRequireDefault(require(\"../../dateutils\"));\n\nvar _style = _interopRequireDefault(require(\"./style\"));\n\nvar _reservation = _interopRequireDefault(require(\"./reservation\"));\n\nvar _jsxFileName = \"C:\\\\Users\\\\oryan\\\\Desktop\\\\BookMeX\\\\BookMexFrontEnd\\\\node_modules\\\\react-native-calendars\\\\src\\\\agenda\\\\reservation-list\\\\index.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar ReservationList = function (_Component) {\n  (0, _inherits2.default)(ReservationList, _Component);\n\n  var _super = _createSuper(ReservationList);\n\n  function ReservationList(props) {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, ReservationList);\n    _this = _super.call(this, props);\n\n    _this.onScroll = function (event) {\n      var yOffset = event.nativeEvent.contentOffset.y;\n\n      _lodash.default.invoke(_this.props, 'onScroll', yOffset);\n\n      var topRowOffset = 0;\n      var topRow;\n\n      for (topRow = 0; topRow < _this.heights.length; topRow++) {\n        if (topRowOffset + _this.heights[topRow] / 2 >= yOffset) {\n          break;\n        }\n\n        topRowOffset += _this.heights[topRow];\n      }\n\n      var row = _this.state.reservations[topRow];\n      if (!row) return;\n      var day = row.day;\n\n      var sameDate = _dateutils.default.sameDate(day, _this.selectedDay);\n\n      if (!sameDate && _this.scrollOver) {\n        _this.selectedDay = day.clone();\n\n        _lodash.default.invoke(_this.props, 'onDayChange', day.clone());\n      }\n    };\n\n    _this.onMoveShouldSetResponderCapture = function () {\n      _this.onListTouch();\n\n      return false;\n    };\n\n    _this.renderRow = function (_ref) {\n      var item = _ref.item,\n          index = _ref.index;\n      var reservationProps = (0, _componentUpdater.extractComponentProps)(_reservation.default, _this.props);\n      return _react.default.createElement(_reactNative.View, {\n        onLayout: _this.onRowLayoutChange.bind((0, _assertThisInitialized2.default)(_this), index),\n        __self: (0, _assertThisInitialized2.default)(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 7\n        }\n      }, _react.default.createElement(_reservation.default, (0, _extends2.default)({}, reservationProps, {\n        item: item,\n        __self: (0, _assertThisInitialized2.default)(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 9\n        }\n      })));\n    };\n\n    _this.style = (0, _style.default)(props.theme);\n    _this.state = {\n      reservations: []\n    };\n    _this.heights = [];\n    _this.selectedDay = props.selectedDay;\n    _this.scrollOver = true;\n    return _this;\n  }\n\n  (0, _createClass2.default)(ReservationList, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.updateDataSource(this.getReservations(this.props).reservations);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this2 = this;\n\n      if (prevProps !== this.props) {\n        if (!_dateutils.default.sameDate(prevProps.topDay, this.props.topDay)) {\n          this.setState({\n            reservations: []\n          }, function () {\n            return _this2.updateReservations(_this2.props);\n          });\n        } else {\n          this.updateReservations(this.props);\n        }\n      }\n    }\n  }, {\n    key: \"updateDataSource\",\n    value: function updateDataSource(reservations) {\n      this.setState({\n        reservations: reservations\n      });\n    }\n  }, {\n    key: \"updateReservations\",\n    value: function updateReservations(props) {\n      var selectedDay = props.selectedDay;\n      var reservations = this.getReservations(props);\n\n      if (this.list && !_dateutils.default.sameDate(selectedDay, this.selectedDay)) {\n        var scrollPosition = 0;\n\n        for (var i = 0; i < reservations.scrollPosition; i++) {\n          scrollPosition += this.heights[i] || 0;\n        }\n\n        this.scrollOver = false;\n        this.list.scrollToOffset({\n          offset: scrollPosition,\n          animated: true\n        });\n      }\n\n      this.selectedDay = selectedDay;\n      this.updateDataSource(reservations.reservations);\n    }\n  }, {\n    key: \"getReservationsForDay\",\n    value: function getReservationsForDay(iterator, props) {\n      var day = iterator.clone();\n      var res = props.reservations[day.toString('yyyy-MM-dd')];\n\n      if (res && res.length) {\n        return res.map(function (reservation, i) {\n          return {\n            reservation: reservation,\n            date: i ? false : day,\n            day: day\n          };\n        });\n      } else if (res) {\n        return [{\n          date: iterator.clone(),\n          day: day\n        }];\n      } else {\n        return false;\n      }\n    }\n  }, {\n    key: \"getReservations\",\n    value: function getReservations(props) {\n      var selectedDay = props.selectedDay,\n          showOnlySelectedDayItems = props.showOnlySelectedDayItems;\n\n      if (!props.reservations || !selectedDay) {\n        return {\n          reservations: [],\n          scrollPosition: 0\n        };\n      }\n\n      var reservations = [];\n\n      if (this.state.reservations && this.state.reservations.length) {\n        var _iterator = this.state.reservations[0].day.clone();\n\n        while (_iterator.getTime() < selectedDay.getTime()) {\n          var res = this.getReservationsForDay(_iterator, props);\n\n          if (!res) {\n            reservations = [];\n            break;\n          } else {\n            reservations = reservations.concat(res);\n          }\n\n          _iterator.addDays(1);\n        }\n      }\n\n      var scrollPosition = reservations.length;\n      var iterator = selectedDay.clone();\n\n      if (showOnlySelectedDayItems) {\n        var _res = this.getReservationsForDay(iterator, props);\n\n        if (_res) {\n          reservations = _res;\n        }\n\n        iterator.addDays(1);\n      } else {\n        for (var i = 0; i < 31; i++) {\n          var _res2 = this.getReservationsForDay(iterator, props);\n\n          if (_res2) {\n            reservations = reservations.concat(_res2);\n          }\n\n          iterator.addDays(1);\n        }\n      }\n\n      return {\n        reservations: reservations,\n        scrollPosition: scrollPosition\n      };\n    }\n  }, {\n    key: \"onListTouch\",\n    value: function onListTouch() {\n      this.scrollOver = true;\n    }\n  }, {\n    key: \"onRowLayoutChange\",\n    value: function onRowLayoutChange(ind, event) {\n      this.heights[ind] = event.nativeEvent.layout.height;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props = this.props,\n          reservations = _this$props.reservations,\n          selectedDay = _this$props.selectedDay,\n          theme = _this$props.theme,\n          style = _this$props.style;\n\n      if (!reservations || !reservations[selectedDay.toString('yyyy-MM-dd')]) {\n        if (_lodash.default.isFunction(this.props.renderEmptyData)) {\n          return _lodash.default.invoke(this.props, 'renderEmptyData');\n        }\n\n        return _react.default.createElement(_reactNative.ActivityIndicator, {\n          style: this.style.indicator,\n          color: theme && theme.indicatorColor,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 14\n          }\n        });\n      }\n\n      return _react.default.createElement(_reactNative.FlatList, {\n        ref: function ref(c) {\n          return _this3.list = c;\n        },\n        style: style,\n        contentContainerStyle: this.style.content,\n        data: this.state.reservations,\n        renderItem: this.renderRow,\n        keyExtractor: function keyExtractor(item, index) {\n          return String(index);\n        },\n        showsVerticalScrollIndicator: false,\n        scrollEventThrottle: 200,\n        onMoveShouldSetResponderCapture: this.onMoveShouldSetResponderCapture,\n        onScroll: this.onScroll,\n        refreshControl: this.props.refreshControl,\n        refreshing: this.props.refreshing,\n        onRefresh: this.props.onRefresh,\n        onScrollBeginDrag: this.props.onScrollBeginDrag,\n        onScrollEndDrag: this.props.onScrollEndDrag,\n        onMomentumScrollBegin: this.props.onMomentumScrollBegin,\n        onMomentumScrollEnd: this.props.onMomentumScrollEnd,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 7\n        }\n      });\n    }\n  }]);\n  return ReservationList;\n}(_react.Component);\n\nReservationList.displayName = 'IGNORE';\nReservationList.propTypes = _objectSpread(_objectSpread({}, _reservation.default.propTypes), {}, {\n  reservations: _propTypes.default.object,\n  selectedDay: _propTypes.default.instanceOf(_xdate.default),\n  topDay: _propTypes.default.instanceOf(_xdate.default),\n  showOnlySelectedDayItems: _propTypes.default.bool,\n  onDayChange: _propTypes.default.func,\n  renderEmptyData: _propTypes.default.func,\n  onScroll: _propTypes.default.func,\n  onScrollBeginDrag: _propTypes.default.func,\n  onScrollEndDrag: _propTypes.default.func,\n  onMomentumScrollBegin: _propTypes.default.func,\n  onMomentumScrollEnd: _propTypes.default.func,\n  refreshControl: _propTypes.default.element,\n  refreshing: _propTypes.default.bool,\n  onRefresh: _propTypes.default.func\n});\nReservationList.defaultProps = {\n  refreshing: false,\n  selectedDay: (0, _xdate.default)(true)\n};\nvar _default = ReservationList;\nexports.default = _default;","map":{"version":3,"sources":["C:/Users/oryan/Desktop/BookMeX/BookMexFrontEnd/node_modules/react-native-calendars/src/agenda/reservation-list/index.js"],"names":["ReservationList","props","onScroll","event","yOffset","nativeEvent","contentOffset","y","_","invoke","topRowOffset","topRow","heights","length","row","state","reservations","day","sameDate","dateutils","selectedDay","scrollOver","clone","onMoveShouldSetResponderCapture","onListTouch","renderRow","item","index","reservationProps","Reservation","onRowLayoutChange","bind","style","theme","updateDataSource","getReservations","prevProps","topDay","setState","updateReservations","list","scrollPosition","i","scrollToOffset","offset","animated","iterator","res","toString","map","reservation","date","showOnlySelectedDayItems","getTime","getReservationsForDay","concat","addDays","ind","layout","height","isFunction","renderEmptyData","indicator","indicatorColor","c","content","String","refreshControl","refreshing","onRefresh","onScrollBeginDrag","onScrollEndDrag","onMomentumScrollBegin","onMomentumScrollEnd","Component","displayName","propTypes","PropTypes","object","instanceOf","XDate","bool","onDayChange","func","element","defaultProps"],"mappings":"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","sourcesContent":["import _ from 'lodash';\nimport PropTypes from 'prop-types';\nimport XDate from 'xdate';\nimport React, {Component} from 'react';\nimport {FlatList, ActivityIndicator, View} from 'react-native';\nimport {extractComponentProps} from '../../component-updater';\nimport dateutils from '../../dateutils';\nimport styleConstructor from './style';\nimport Reservation from './reservation';\n\nclass ReservationList extends Component {\n  static displayName = 'IGNORE';\n\n  static propTypes = {\n    ...Reservation.propTypes,\n    /** the list of items that have to be displayed in agenda. If you want to render item as empty date\n    the value of date key kas to be an empty array []. If there exists no value for date key it is\n    considered that the date in question is not yet loaded */ \n    reservations: PropTypes.object,\n    selectedDay: PropTypes.instanceOf(XDate),\n    topDay: PropTypes.instanceOf(XDate),\n    /** Show items only for the selected day. Default = false */\n    showOnlySelectedDayItems: PropTypes.bool,\n    /** callback that gets called when day changes while scrolling agenda list */ \n    onDayChange: PropTypes.func,\n    /** specify what should be rendered instead of ActivityIndicator */\n    renderEmptyData: PropTypes.func,\n\n    /** onScroll ListView event */\n    onScroll: PropTypes.func,\n    /** Called when the user begins dragging the agenda list **/\n    onScrollBeginDrag: PropTypes.func,\n    /** Called when the user stops dragging the agenda list **/\n    onScrollEndDrag: PropTypes.func,\n    /** Called when the momentum scroll starts for the agenda list **/\n    onMomentumScrollBegin: PropTypes.func,\n    /** Called when the momentum scroll stops for the agenda list **/\n    onMomentumScrollEnd: PropTypes.func,\n    /** A RefreshControl component, used to provide pull-to-refresh functionality for the ScrollView */\n    refreshControl: PropTypes.element,\n    /** Set this true while waiting for new data from a refresh */\n    refreshing: PropTypes.bool,\n    /** If provided, a standard RefreshControl will be added for \"Pull to Refresh\" functionality. Make sure to also set the refreshing prop correctly */\n    onRefresh: PropTypes.func\n  };\n\n  static defaultProps = {\n    refreshing: false,\n    selectedDay: XDate(true)\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.style = styleConstructor(props.theme);\n\n    this.state = {\n      reservations: []\n    };\n\n    this.heights = [];\n    this.selectedDay = props.selectedDay;\n    this.scrollOver = true;\n  }\n\n  componentDidMount() {\n    this.updateDataSource(this.getReservations(this.props).reservations);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps !== this.props) {\n      if (!dateutils.sameDate(prevProps.topDay, this.props.topDay)) {\n        this.setState(\n          {\n            reservations: []\n          },\n          () => this.updateReservations(this.props)\n        );\n      } else {\n        this.updateReservations(this.props);\n      }\n    }\n  }\n\n  updateDataSource(reservations) {\n    this.setState({\n      reservations\n    });\n  }\n\n  updateReservations(props) {\n    const {selectedDay} = props;\n    const reservations = this.getReservations(props);\n    if (this.list && !dateutils.sameDate(selectedDay, this.selectedDay)) {\n      let scrollPosition = 0;\n      for (let i = 0; i < reservations.scrollPosition; i++) {\n        scrollPosition += this.heights[i] || 0;\n      }\n      this.scrollOver = false;\n      this.list.scrollToOffset({offset: scrollPosition, animated: true});\n    }\n    this.selectedDay = selectedDay;\n    this.updateDataSource(reservations.reservations);\n  }\n\n  getReservationsForDay(iterator, props) {\n    const day = iterator.clone();\n    const res = props.reservations[day.toString('yyyy-MM-dd')];\n    if (res && res.length) {\n      return res.map((reservation, i) => {\n        return {\n          reservation,\n          date: i ? false : day,\n          day\n        };\n      });\n    } else if (res) {\n      return [\n        {\n          date: iterator.clone(),\n          day\n        }\n      ];\n    } else {\n      return false;\n    }\n  }\n\n  getReservations(props) {\n    const {selectedDay, showOnlySelectedDayItems} = props;\n    if (!props.reservations || !selectedDay) {\n      return {reservations: [], scrollPosition: 0};\n    }\n\n    let reservations = [];\n    if (this.state.reservations && this.state.reservations.length) {\n      const iterator = this.state.reservations[0].day.clone();\n\n      while (iterator.getTime() < selectedDay.getTime()) {\n        const res = this.getReservationsForDay(iterator, props);\n        if (!res) {\n          reservations = [];\n          break;\n        } else {\n          reservations = reservations.concat(res);\n        }\n        iterator.addDays(1);\n      }\n    }\n\n    const scrollPosition = reservations.length;\n    const iterator = selectedDay.clone();\n    if (showOnlySelectedDayItems) {\n      const res = this.getReservationsForDay(iterator, props);\n\n      if (res) {\n        reservations = res;\n      }\n      iterator.addDays(1);\n    } else {\n      for (let i = 0; i < 31; i++) {\n        const res = this.getReservationsForDay(iterator, props);\n\n        if (res) {\n          reservations = reservations.concat(res);\n        }\n        iterator.addDays(1);\n      }\n    }\n\n    return {reservations, scrollPosition};\n  }\n\n  onScroll = event => {\n    const yOffset = event.nativeEvent.contentOffset.y;\n    _.invoke(this.props, 'onScroll', yOffset);\n\n    let topRowOffset = 0;\n    let topRow;\n    for (topRow = 0; topRow < this.heights.length; topRow++) {\n      if (topRowOffset + this.heights[topRow] / 2 >= yOffset) {\n        break;\n      }\n      topRowOffset += this.heights[topRow];\n    }\n\n    const row = this.state.reservations[topRow];\n    if (!row) return;\n\n    const day = row.day;\n    const sameDate = dateutils.sameDate(day, this.selectedDay);\n    if (!sameDate && this.scrollOver) {\n      this.selectedDay = day.clone();\n      _.invoke(this.props, 'onDayChange', day.clone());\n    }\n  };\n\n  onListTouch() {\n    this.scrollOver = true;\n  }\n\n  onRowLayoutChange(ind, event) {\n    this.heights[ind] = event.nativeEvent.layout.height;\n  }\n\n  onMoveShouldSetResponderCapture = () => {\n    this.onListTouch();\n    return false;\n  };\n\n  renderRow = ({item, index}) => {\n    const reservationProps = extractComponentProps(Reservation, this.props);\n\n    return (\n      <View onLayout={this.onRowLayoutChange.bind(this, index)}>\n        <Reservation {...reservationProps} item={item} />\n      </View>\n    );\n  };\n\n  render() {\n    const {reservations, selectedDay, theme, style} = this.props;\n    if (!reservations || !reservations[selectedDay.toString('yyyy-MM-dd')]) {\n      if (_.isFunction(this.props.renderEmptyData)) {\n        return _.invoke(this.props, 'renderEmptyData');\n      }\n\n      return <ActivityIndicator style={this.style.indicator} color={theme && theme.indicatorColor} />;\n    }\n\n    return (\n      <FlatList\n        ref={c => (this.list = c)}\n        style={style}\n        contentContainerStyle={this.style.content}\n        data={this.state.reservations}\n        renderItem={this.renderRow}\n        keyExtractor={(item, index) => String(index)}\n        showsVerticalScrollIndicator={false}\n        scrollEventThrottle={200}\n        onMoveShouldSetResponderCapture={this.onMoveShouldSetResponderCapture}\n        onScroll={this.onScroll}\n        refreshControl={this.props.refreshControl}\n        refreshing={this.props.refreshing}\n        onRefresh={this.props.onRefresh}\n        onScrollBeginDrag={this.props.onScrollBeginDrag}\n        onScrollEndDrag={this.props.onScrollEndDrag}\n        onMomentumScrollBegin={this.props.onMomentumScrollBegin}\n        onMomentumScrollEnd={this.props.onMomentumScrollEnd}\n      />\n    );\n  }\n}\n\nexport default ReservationList;\n"]},"metadata":{},"sourceType":"script"}